"use strict";(self.webpackChunkstart_n_end=self.webpackChunkstart_n_end||[]).push([[913],{6024:function(t,e,i){i.r(e),i.d(e,{default:function(){return b}});var a=i(5671),s=i(3144),n=i(136),r=i(8557),o=i(2791),c=i(2426),m=i.n(c),l=i(2312),u=i(495),f=i(5832),d=i(127);var h=i.p+"static/media/work.825e9dce55f48ee45eb4647eabc542c8.svg";var g=i.p+"static/media/onwork.cf82092aa213757d514618161a8d62f6.svg";var p=i.p+"static/media/offwork.2944eac26269b3be9ce324bc665016b0.svg",v=i(184),T="HH : mm : ss",w=/Mobi|Android|iPhone/i.test(navigator.userAgent),S=function(t){var e=localStorage.getItem(t);return!!e&&JSON.parse(e)},N=function(t,e,i){localStorage.setItem(t,JSON.stringify({start:e,end:i}))},C=function(t){(0,n.Z)(o,t);var e=(0,r.Z)(o);function o(){var t;(0,a.Z)(this,o);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))).state={startTime:S("time").start||"08 : 30 : 00",endTime:S("time").end||"18 : 30 : 00",restTime:"00 : 00 : 00"},t.setNotification=function(t,e){var a=function(){new Notification(t,{body:e,icon:i(7352)})};"granted"===window.Notification.permission?a():"denied"!==window.Notification.permission&&window.Notification.requestPermission((function(t){a()}))},t.getTimeDiff=function(t,e){var i=Math.abs(t.diff(e,"seconds")%60).toString().padStart(2,"0"),a=Math.abs(t.diff(e,"minutes")%60).toString().padStart(2,"0");return Math.abs(t.diff(e,"hours")%24).toString().padStart(2,"0")+" : "+a+" : "+i},t.handleTime=function(){var e=m()(t.state.startTime,T),i=m()(t.state.endTime,T),a=m()();if(a>i){if(t.setState({restTime:t.getTimeDiff(i,a)}),"1"===t.status)return t.setNotification("\u91cd\u8981\u901a\u77e5\uff1a","\u4e0b\u73ed\u5566\uff01"),void(t.status="2")}else if(a<e){if(t.setState({restTime:t.getTimeDiff(e,a)}),"2"===t.status)return t.setNotification("\u91cd\u8981\u901a\u77e5\uff1a","\u65b0\u7684\u4e00\u5929\u5f00\u59cb\u4e86\uff01"),void(t.status="0")}else if(a>e&&a<i&&(t.setState({restTime:t.getTimeDiff(i,a)}),"0"===t.status))return t.setNotification("\u91cd\u8981\u901a\u77e5\uff1a","\u5f00\u59cb\u642c\u7816\uff01"),void(t.status="1")},t.computeRestTime=function(){t.status=m()(t.state.endTime,T)>m()(),t.handleTime(),t.timerID=setInterval(t.handleTime,500)},t.handleSave=function(e){clearInterval(t.timerID),t.computeRestTime(),N("time",t.state.startTime,t.state.endTime)},t.handleCancel=function(){t.menuShow=!1},t.onStartChange=function(e,i){t.setState({startTime:i})},t.onFinishChange=function(e,i){t.setState({endTime:i})},t.onClickMenu=function(){t.menuShow=!t.menuShow},t}return(0,s.Z)(o,[{key:"componentDidMount",value:function(){var t=m()(this.state.startTime,T),e=m()(this.state.endTime,T),i=m()();i>e?this.setNotification("\u73b0\u5728\u72b6\u6001\uff1a","\u5df2\u4e0b\u73ed\uff01"):i<t?this.setNotification("\u73b0\u5728\u72b6\u6001\uff1a","\u5c1a\u672a\u4e0a\u73ed\uff01"):this.setNotification("\u73b0\u5728\u72b6\u6001\uff1a","\u6b63\u5728\u4e0a\u73ed\uff01"),this.computeRestTime()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"render",value:function(){return(0,v.jsxs)(l.Z,{direction:"vertical",className:w?"home-wrapper is-phone":"home-wrapper",children:[(0,v.jsxs)("div",{className:"time",children:["0"===this.status?(0,v.jsx)("img",{className:"image",src:g,alt:"\u5df2\u4e0b\u73ed",title:"\u5df2\u4e0b\u73ed\uff01"}):"1"===this.status?(0,v.jsx)("img",{className:"image",src:h,alt:"\u672a\u4e0a\u73ed",title:"\u672a\u4e0a\u73ed\uff01"}):"2"===this.status?(0,v.jsx)("img",{className:"image",src:p,alt:"\u4e0a\u73ed\u4e2d",title:"\u4e0a\u73ed\u4e2d\uff01"}):"",(0,v.jsx)("span",{className:"text",children:this.state.restTime})]}),this.menuShow&&(0,v.jsxs)("div",{className:"editor",children:[(0,v.jsx)(u.Z,{defaultValue:m()(this.state.startTime,T),format:T,size:"large",allowClear:!0,style:{width:"100%"},onChange:this.onStartChange}),(0,v.jsx)(u.Z,{defaultValue:m()(this.state.endTime,T),format:T,size:"large",allowClear:!0,style:{width:"100%"},onChange:this.onFinishChange}),(0,v.jsxs)(l.Z,{className:"buttons",children:[(0,v.jsx)(f.Z,{size:"large",onClick:this.handleCancel,children:"\u5173\u95ed"}),(0,v.jsx)(f.Z,{size:"large",type:"primary",onClick:this.handleSave,children:"\u4fdd\u5b58"})]})]}),(0,v.jsx)(d.Z,{className:"icon-menu",onClick:this.onClickMenu})]})}}]),o}(o.Component),b=function(){return(0,v.jsx)(C,{})}},7352:function(t,e,i){t.exports=i.p+"static/media/web-title.0242d5cdb2f566de39f6.jpg"}}]);
//# sourceMappingURL=default.95c51464.chunk.js.map