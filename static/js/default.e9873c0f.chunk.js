"use strict";(self.webpackChunkstart_n_end=self.webpackChunkstart_n_end||[]).push([[913],{6024:function(t,e,i){i.r(e),i.d(e,{default:function(){return b}});var s=i(5671),a=i(3144),n=i(136),o=i(8557),r=i(2791),c=i(2426),u=i.n(c),m=i(1743),l=i(2312),f=i(5584),d=i(3707),h=i(127);var g=i.p+"static/media/work.825e9dce55f48ee45eb4647eabc542c8.svg";var S=i.p+"static/media/onwork.cf82092aa213757d514618161a8d62f6.svg";var p=i.p+"static/media/offwork.2944eac26269b3be9ce324bc665016b0.svg",v=i(184),T="HH : mm : ss",N=/Mobi|Android|iPhone/i.test(navigator.userAgent),w=function(t){var e=localStorage.getItem(t);return!!e&&JSON.parse(e)},k=function(t,e,i){localStorage.setItem(t,JSON.stringify({start:e,end:i}))},x=function(t){(0,n.Z)(r,t);var e=(0,o.Z)(r);function r(){var t;(0,s.Z)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))).state={startTime:w("time").start||"08 : 30 : 00",endTime:w("time").end||"17 : 30 : 00",restTime:"00 : 00 : 00",status:""},t.setStatus=function(e){t.setState({status:e})},t.setNotification=function(t,e){var s=function(){new Notification(t,{body:e,icon:i(7352)})};"granted"===window.Notification.permission?s():"denied"!==window.Notification.permission&&window.Notification.requestPermission((function(t){s()}))},t.getTimeDiff=function(t,e){var i=Math.abs(t.diff(e,"seconds")%60).toString().padStart(2,"0"),s=Math.abs(t.diff(e,"minutes")%60).toString().padStart(2,"0");return Math.abs(t.diff(e,"hours")%24).toString().padStart(2,"0")+" : "+s+" : "+i},t.computeRestTime=function(){var e=u()(t.state.startTime,T),i=u()(t.state.endTime,T),s=u()();if(s>=i){if(t.setState({restTime:t.getTimeDiff(i,s)}),"1"===t.state.status)return t.setNotification("\u91cd\u8981\u901a\u77e5\uff1a","\u4e0b\u73ed\u5566\uff01"),void t.setStatus("2")}else if(s<e){if(t.setState({restTime:t.getTimeDiff(e,s)}),"2"===t.status)return t.setNotification("\u91cd\u8981\u901a\u77e5\uff1a","\u65b0\u7684\u4e00\u5929\u5f00\u59cb\u4e86\uff01"),void t.setStatus("0")}else if(s>=e&&s<i&&(t.setState({restTime:t.getTimeDiff(i,s)}),"0"===t.status))return t.setNotification("\u91cd\u8981\u901a\u77e5\uff1a","\u5f00\u59cb\u642c\u7816\uff01"),void t.setStatus("1")},t.setTimer=function(){t.initStatus(),t.computeRestTime(),t.timerID=setInterval(t.computeRestTime,500)},t.handleSave=function(e){clearInterval(t.timerID),t.setTimer(),k("time",t.state.startTime,t.state.endTime),m.ZP.success("\u65f6\u95f4\u4fdd\u5b58\u6210\u529f\uff01")},t.handleCancel=function(){t.menuShow=!1},t.onStartChange=function(e,i){t.setState({startTime:i})},t.onFinishChange=function(e,i){t.setState({endTime:i})},t.onClickMenu=function(){t.menuShow=!t.menuShow},t}return(0,a.Z)(r,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){this.setTimer()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"initStatus",value:function(){var t=u()(this.state.startTime,T),e=u()(this.state.endTime,T),i=u()();i>=e?(this.setNotification("\u73b0\u5728\u72b6\u6001\uff1a","\u5df2\u4e0b\u73ed\uff01"),this.setStatus("2")):i<t?(this.setNotification("\u73b0\u5728\u72b6\u6001\uff1a","\u5c1a\u672a\u4e0a\u73ed\uff01"),this.setStatus("0")):i>=t&&i<e&&(this.setNotification("\u73b0\u5728\u72b6\u6001\uff1a","\u6b63\u5728\u4e0a\u73ed\uff01"),this.setStatus("1"))}},{key:"render",value:function(){return(0,v.jsxs)(l.Z,{direction:"vertical",className:N?"home-wrapper is-phone":"home-wrapper",children:[(0,v.jsxs)("div",{className:"time",children:["0"===this.state.status?(0,v.jsx)("img",{className:"image",src:S,alt:"\u5c1a\u672a\u4e0a\u73ed",title:"\u5c1a\u672a\u4e0a\u73ed\uff01"}):"1"===this.state.status?(0,v.jsx)("img",{className:"image",src:g,alt:"\u6b63\u5728\u642c\u7816",title:"\u6b63\u5728\u642c\u7816\uff01"}):"2"===this.state.status?(0,v.jsx)("img",{className:"image",src:p,alt:"\u4e0b\u73ed\u5566",title:"\u4e0b\u73ed\u5566\uff01"}):(0,v.jsx)("img",{className:"image",src:g,alt:"\u6b63\u5728\u642c\u7816",title:"\u6b63\u5728\u642c\u7816\uff01"}),(0,v.jsx)("span",{className:"text",children:this.state.restTime})]}),this.menuShow&&(0,v.jsxs)("div",{className:"editor",children:[(0,v.jsx)(f.Z,{defaultValue:u()(this.state.startTime,T),format:T,size:"large",style:{width:"100%"},onChange:this.onStartChange}),(0,v.jsx)(f.Z,{defaultValue:u()(this.state.endTime,T),format:T,size:"large",style:{width:"100%"},onChange:this.onFinishChange}),(0,v.jsxs)(l.Z,{className:"buttons",children:[(0,v.jsx)(d.Z,{size:"large",onClick:this.handleCancel,children:"\u5173\u95ed"}),(0,v.jsx)(d.Z,{size:"large",type:"primary",onClick:this.handleSave,children:"\u4fdd\u5b58"})]})]}),(0,v.jsx)(h.Z,{className:"icon-menu",onClick:this.onClickMenu})]})}}]),r}(r.Component),b=function(){return(0,v.jsx)(x,{})}},7352:function(t,e,i){t.exports=i.p+"static/media/web-title.0242d5cdb2f566de39f6.jpg"}}]);
//# sourceMappingURL=default.e9873c0f.chunk.js.map